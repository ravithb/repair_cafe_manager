generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "mysql"
}

model customers {
  id          Int            @id @default(autoincrement())
  title       String?        @db.VarChar(8)
  firstname   String?        @db.VarChar(32)
  lastname    String?        @db.VarChar(32)
  email       String?        @db.VarChar(64)
  phone       String?        @db.VarChar(32)
  repairItems repair_items[]
  repairSessions repair_sessions[]
}

model locations {
  id       Int    @id @default(autoincrement())
  location String @db.VarChar(64)
}

model repair_session_items {
  repair_session_id     Int
  repair_item_id        Int
  repair_status         String?
  notes                 String?
  primary_repairer_id   Int?
  secondary_repairer_id Int?
  repair_item           repair_items? @relation(fields: [repair_item_id], references: [id])
  repair_session        repair_sessions? @relation(fields: [repair_session_id], references: [id])
  @@id([repair_session_id, repair_item_id])
}

model repair_sessions {
  id           Int            @id @default(autoincrement())
  session_date DateTime?      @db.Date
  location_id  Int?
  timeslot     String?        @db.VarChar(32)
  token_no     Int?
  customer_id  Int?
  customer     customers? @relation(fields: [customer_id], references: [id])
  repairItems  repair_items[]
  repairSessionItems repair_session_items[]
}

model repairers {
  id        Int     @id @default(autoincrement())
  title     String? @db.VarChar(8)
  firstname String? @db.VarChar(64)
  lastname  String? @db.VarChar(64)
  email     String? @db.VarChar(256)
  phone     String? @db.VarChar(32)
}

model repair_items {
  id                 Int                     @id @default(autoincrement())
  item               String                  @db.VarChar(256)
  make               String?                 @db.VarChar(64)
  model              String?                 @db.VarChar(64)
  fault              String?                 @db.Text
  weight             Float?                  @db.Float
  last_repair_status String?                 @db.VarChar(16)
  last_session_id    Int?
  customer_id        Int?
  category_id        Int?
  repair_sessions_id  Int?
  session            repair_sessions?        @relation(fields: [repair_sessions_id], references: [id])
  category           repair_item_categories? @relation(fields: [category_id], references: [id])
  customer           customers?              @relation(fields: [customer_id], references: [id])
  repairSessionItems repair_session_items[]  
}

model repair_item_categories {
  id           Int            @id @default(autoincrement())
  category     String         @db.VarChar(256)
  repair_items repair_items[]
}
